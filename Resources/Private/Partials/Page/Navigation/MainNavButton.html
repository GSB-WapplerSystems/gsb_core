
<f:comment>
    <!--
 * This file is part of the package itzbund/gsb-core of the GSB 11 Project by ITZBund
 * (c) Matthias Peltzer <matthias.peltzer@digitaspixelpark.com> 2023
 * (c) Kai Ole Hartwig <o.hartwig@moselwal.de> 2023
 * Licensed under the GPL 2.0 License.
 -->
</f:comment>

<f:if condition="{menuMain}">
    <div class="main-nav-wrapper">
        <div class="container">
            <ul class="main-menu list-unstyled row" id="mainNav">
                <f:for each="{menuMain}" as="mainItem">
                    <li class="col-12 col-md-6 col-xl-3">
                        <f:if condition="{mainItem.current}">
                            <f:then>
                                <f:link.page pageUid="{mainItem.data.uid}" aria="{current: 'page'}" class="first-child dropdown-item{f:if(condition:mainItem.active, then:' act cur')}">
                                    {mainItem.title}
                                </f:link.page>
                            </f:then>
                            <f:else>
                                <f:link.page pageUid="{mainItem.data.uid}" class="first-child dropdown-item{f:if(condition:mainItem.active, then:' act')}">
                                    {mainItem.title}
                                </f:link.page>
                            </f:else>
                        </f:if>
                        <f:if condition="{mainItem.children}">
                            <button class="btn-open collapsed dropdown-item" type="button" data-bs-toggle="collapse" data-bs-target="#menu-{mainItem.data.uid}" aria-expanded="false" aria-controls="menu-{mainItem.data.uid}">
                                <span class="visually-hidden">Untermenü öffnen</span></button>
                            <ul class="list-unstyled collapse" id="menu-{mainItem.data.uid}">
                                <f:for each="{mainItem.children}" as="mainChild">
                                    <f:render section="submenu" arguments="{mainChild: mainChild}"/>
                                </f:for>
                            </ul>
                        </f:if>
                    </li>
                </f:for>
            </ul>
        </div>
    </div>
</f:if>

<f:section name="submenu">
    <li>
        <f:if condition="{mainChild.current}">
            <f:then>
                <f:link.page pageUid="{mainChild.data.uid}" aria="{current: 'page'}" class="sub dropdown-item{f:if(condition:mainChild.active, then:' act cur')}">
                    {mainChild.title}
                </f:link.page>
            </f:then>
            <f:else>
                <f:link.page pageUid="{mainChild.data.uid}" class="sub dropdown-item{f:if(condition:mainChild.active, then:' act')}">
                    {mainChild.title}
                </f:link.page>
            </f:else>
        </f:if>
        <f:if condition="{mainChild.children}">
            <button class="btn-open collapsed dropdown-item" type="button" data-bs-toggle="collapse" data-bs-target="#menu-{mainChild.data.uid}" aria-expanded="false" aria-controls="menu-{mainChild.data.uid}">
                <span class="visually-hidden">Untermenü öffnen</span></button>
            <ul class="list-unstyled collapse" id="menu-{mainChild.data.uid}">
                <f:for each="{mainChild.children}" as="mainChild">
                    <f:render section="submenu" arguments="{mainChild: mainChild}"/>
                </f:for>
            </ul>
        </f:if>
    </li>
</f:section>
