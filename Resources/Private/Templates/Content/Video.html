<html data-namespace-typo3-fluid="true" lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://typo3.org/ns/TYPO3/Fluid/ViewHelpers" xmlns:gsb="http://typo3.org/ns/Gsb/GsbTemplate/ViewHelpers">

<div class="frame frame-{data.frame_class} frame-type-video frame-layout-{data.layout}{f:if(condition: data.space_before_class, then: ' frame-space-before-{data.space_before_class}')}{f:if(condition: data.space_after_class, then: ' frame-space-after-{data.space_after_class}')}" id="c{data.uid}">

    <f:if condition="{data.tx_video_mainstage}">
        <f:then>
            <f:render arguments="{_all}" section="PopupVideo"/>
        </f:then>
        <f:else>
            <f:render arguments="{_all}" section="Video"/>
        </f:else>
    </f:if>

    <!-- Sections -->
    <f:section name="Video">
        <f:if condition="{data.header_kicker}">
            <p class="kicker"><f:format.raw>{data.header_kicker}</f:format.raw></p>
        </f:if>
        <f:if condition="{data.header}">
            <f:switch expression="{data.header_layout}">
                <f:case value="2">
                    <h2 class="{f:if(condition: data.header_position, then: 'ce-headline-{data.header_position}')} {f:if(condition: data.tx_header_style, then: data.tx_header_style)}">
                        <f:format.raw>{data.header}</f:format.raw>
                    </h2>
                </f:case>
                <f:case value="3">
                    <h3 class="{f:if(condition: data.header_position, then: 'ce-headline-{data.header_position}')} {f:if(condition: data.tx_header_style, then: data.tx_header_style)}">
                        <f:format.raw>{data.header}</f:format.raw>
                    </h3>
                </f:case>
                <f:case value="4">
                    <h4 class="{f:if(condition: data.header_position, then: 'ce-headline-{data.header_position}')} {f:if(condition: data.tx_header_style, then: data.tx_header_style)}">
                        <f:format.raw>{data.header}</f:format.raw>
                    </h4>
                </f:case>
                <f:case value="5">
                    <h5 class="{f:if(condition: data.header_position, then: 'ce-headline-{data.header_position}')} {f:if(condition: data.tx_header_style, then: data.tx_header_style)}">
                        <f:format.raw>{data.header}</f:format.raw>
                    </h5>
                </f:case>
                <f:case value="6">
                    <h6 class="{f:if(condition: data.header_position, then: 'ce-headline-{data.header_position}')} {f:if(condition: data.tx_header_style, then: data.tx_header_style)}">
                        <f:format.raw>{data.header}</f:format.raw>
                    </h6>
                </f:case>
                <f:case value="7">
                    <h1 class="visually-hidden">
                        <f:format.raw>{data.header}</f:format.raw>
                    </h1>
                </f:case>
                <f:case value="8">
                    <h2 class="visually-hidden">
                        <f:format.raw>{data.header}</f:format.raw>
                    </h2>
                </f:case>
                <f:case value="9">
                    <h3 class="visually-hidden">
                        <f:format.raw>{data.header}</f:format.raw>
                    </h3>
                </f:case>
                <f:case value="10">
                    <h4 class="visually-hidden">
                        <f:format.raw>{header}</f:format.raw>
                    </h4>
                </f:case>
                <f:case value="100">
                    <f:comment> -- do not show header -- </f:comment>
                </f:case>
            </f:switch>
        </f:if>

        <f:if condition="{data.subheader}">
            <p class="lead"><f:format.raw>{data.subheader}</f:format.raw></p>
        </f:if>

        <f:if condition="{data.bodytext}">
            <f:format.html>{data.bodytext}</f:format.html>
        </f:if>

        <f:if condition="{data.tx_video_video}">
            <div class="video video-local">
                <video controls height="100%" poster="{f:uri.image(image: '{data.tx_video_poster_image.0}', maxWidth: 973, maxHeight: 535c)}" preload="none" style="width:100%; height:100%;" width="100%">
                    <source src="{f:uri.typolink(parameter: '{data.tx_video_video}')}" type="video/mp4">
                    <f:if condition="{data.tx_video_caption}">
                        <track default kind="subtitles" src="{f:uri.typolink(parameter: '{data.tx_video_caption}')}" srclang="{f:cObject(typoscriptObjectPath: 'lib.languageFe')}">
                    </f:if>
                </video>
            </div>
        </f:if>

        <f:if condition="{data.tx_video_videourl}">
            <div class="video video-youtube">
                <div class="dsgvo" {f:if(condition: '{data_tx_video_poster_image.0}', then: ' style="background:url(\'{f:uri.image(image: data_tx_video_poster_image.0, maxWidth: 973, maxHeight: 535c)}\') no-repeat 0 0; background-size: cover;"')}{f:if(condition: '{data.tx_video_videourl}', then: ' data-src={data.tx_video_videourl -> f:format.raw()}')}')}>
                    <div class="player-wrapper">
                        <div class="dsgvo-text">
                            <button class="video-start mejs__overlay-button" title="{f:translate(key: 'videoyoutube.play', extensionName: 'gsb_template')}">
                                <span class="visually-hidden">{f:translate(key: 'videoyoutube.play', extensionName: 'gsb_template')}</span>
                            </button>
                            <p><f:format.raw>{f:translate(key: 'videoyoutube.link', extensionName: 'gsb_template')}</f:format.raw></p>
                        </div>
                    </div>
                </div>
            </div>
        </f:if>
    </f:section>

    <f:section name="PopupVideo">
        <div class="video-teaser {f:if(condition: '{data.tx_video_poster_video} == FALSE && {data_tx_video_poster_image.0}', then: 'video-teaser-img')}">
            <f:if condition="{data.tx_video_poster_video}">
                <f:then>
                    <div class="video-teaser-wrapper">
                        <video autoplay class="teaser" muted>
                            <source src="{f:uri.typolink(parameter: '{data.tx_video_poster_video}')}" type="video/mp4">
                        </video>
                    </div>
                </f:then>
                <f:else>
                    <f:if condition="{data_tx_video_poster_image.0}">
                        <f:alias map="<gsb:format.json.decode>{data_tx_video_poster_image.0.properties.crop}</gsb:format.json.decode>">
                            <picture data-aspectratio-lg="{large.selectedRatio}" data-aspectratio-md="{medium.selectedRatio}" data-aspectratio-sm="{small.selectedRatio}" data-aspectratio-xl="{default.selectedRatio}" data-aspectratio-xs="{xsmall.selectedRatio}">
                                <source data-srcset="{f:uri.image(image: data_tx_video_poster_image.0, cropVariant: 'default', maxWidth: 1440)}" media="(min-width: 1220px)" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==">
                                <source data-srcset="{f:uri.image(image: data_tx_video_poster_image.0, cropVariant: 'large', maxWidth: 1220)}" media="(min-width: 992px)" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==">
                                <source data-srcset="{f:uri.image(image: data_tx_video_poster_image.0, cropVariant: 'medium', maxWidth: 992)}" media="(min-width: 768px)" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==">
                                <source data-srcset="{f:uri.image(image: data_tx_video_poster_image.0, cropVariant: 'small', maxWidth: 768)}" media="(min-width: 576px)" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==">
                                <source data-srcset="{f:uri.image(image: data_tx_video_poster_image.0, cropVariant: 'xsmall', maxWidth: 576)}" media="(min-width: 0)" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==">
                                <img alt="{data_tx_video_poster_image.0.properties.alternative}" class="lazy" data-description="{data_tx_video_poster_image.0.properties.description}" data-height="{data_tx_video_poster_image.0.imageheight}" data-src="{f:uri.image(image: data_tx_video_poster_image.0, cropVariant: 'default', maxWidth: 1440)}" data-title="{data_tx_video_poster_image.0.properties.title}" data-width="{data_tx_video_poster_image.0.imagewidth}" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==">
                            </picture>
                            <noscript>
                                {f:image(image: data_tx_video_poster_image.0, cropVariant: 'default', maxWidth: 1440)}
                            </noscript>
                        </f:alias>
                    </f:if>
                </f:else>
            </f:if>

            <f:if condition="{data.tx_video_video}">
                <a class="js-play-button btn" data-bs-target="#popupVideo-{data.uid}" data-bs-toggle="modal" href="#popupVideo-{data.uid}" role="button">
                    <span class="play-button-text">{f:translate(key: 'videoyoutube.play', extensionName: 'gsb_template')}</span>
                </a>
            </f:if>

            <div class="video-body">
                <div class="container">
                    <div class="video-body-wrapper">
                        <f:if condition="{data.header_kicker}">
                            <p class="kicker">
                                <f:format.raw>{data.header_kicker}</f:format.raw>
                            </p>
                        </f:if>

                        <f:if condition="{data.header}">
                            <f:switch expression="{data.header_layout}">
                                <f:case value="2">
                                    <h2 class="{f:if(condition: data.header_position, then: 'ce-headline-{data.header_position}')} {f:if(condition: data.tx_header_style, then: data.tx_header_style)}"><f:format.raw>{data.header}</f:format.raw></h2>
                                </f:case>
                                <f:case value="3">
                                    <h3 class="{f:if(condition: data.header_position, then: 'ce-headline-{data.header_position}')} {f:if(condition: data.tx_header_style, then: data.tx_header_style)}"><f:format.raw>{data.header}</f:format.raw></h3>
                                </f:case>
                                <f:case value="4">
                                    <h4 class="{f:if(condition: data.header_position, then: 'ce-headline-{data.header_position}')} {f:if(condition: data.tx_header_style, then: data.tx_header_style)}"><f:format.raw>{data.header}</f:format.raw></h4>
                                </f:case>
                                <f:case value="5">
                                    <h5 class="{f:if(condition: data.header_position, then: 'ce-headline-{data.header_position}')} {f:if(condition: data.tx_header_style, then: data.tx_header_style)}"><f:format.raw>{data.header}</f:format.raw></h5>
                                </f:case>
                                <f:case value="6">
                                    <h6 class="{f:if(condition: data.header_position, then: 'ce-headline-{data.header_position}')} {f:if(condition: data.tx_header_style, then: data.tx_header_style)}"><f:format.raw>{data.header}</f:format.raw></h6>
                                </f:case>
                                <f:case value="7">
                                    <h1 class="visually-hidden"><f:format.raw>{data.header}</f:format.raw></h1>
                                </f:case>
                                <f:case value="8">
                                    <h2 class="visually-hidden"><f:format.raw>{data.header}</f:format.raw></h2>
                                </f:case>
                                <f:case value="9">
                                    <h3 class="visually-hidden"><f:format.raw>{data.header}</f:format.raw></h3>
                                </f:case>
                                <f:case value="10">
                                    <h4 class="visually-hidden"><f:format.raw>{data.header}</f:format.raw></h4>
                                </f:case>
                                <f:case value="100">
                                    <f:comment> -- do not show header --</f:comment>
                                </f:case>
                            </f:switch>
                        </f:if>

                        <f:if condition="{data.bodytext}">
                            <f:format.html>{data.bodytext}</f:format.html>
                        </f:if>

                        <a href="#main-container" title="{f:translate(key: 'to.content', extensionName: 'gsb_template')}" class="btn-bottom" role="button"><span class="visually-hidden">{f:translate(key: 'to.content', extensionName: 'gsb_template')}</span></a>
                    </div>
                </div>
            </div>

            <f:if condition="{data.tx_video_video}">
                <div aria-hidden="true" class="modal fade js-popup-player" data-bs-backdrop="static" id="popupVideo-{data.uid}" style="display: none;" tabindex="-1">
                    <div class="modal-dialog modal-fullscreen" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div class="container">
                                    <div class="row modal-row">
                                        <div class="col-12 modal-col-1">
                                            <button aria-label="{f:translate(key: 'content.close', extensionName: 'gsb_template')}" class="btn-close" data-bs-dismiss="modal" title="{f:translate(key: 'content.close', extensionName: 'gsb_template')}" type="button"></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-body modal-body-video">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="video-wrapper">
                                                <video src="{f:uri.typolink(parameter: '{data.tx_video_video}')}" class="popup-player" style="max-width: 100%;" controls poster="{f:uri.image(image: '{data_tx_video_poster_image.0}', maxWidth: 1280, maxHeight: 720c)}" preload="none">
                                                    <f:if condition="{data.tx_video_caption}">
                                                        <track default kind="subtitles" src="{f:uri.typolink(parameter: '{data.tx_video_caption}')}" srclang="{f:cObject(typoscriptObjectPath: 'lib.languageFe')}">
                                                    </f:if>
                                                </video>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </f:if>
        </div>
    </f:section>
</div>

<f:asset.script identifier="mediaelementsJS" src="EXT:gsb_template/Resources/Public/JavaScripts/mediaelements.js"/>
<f:asset.css href="EXT:gsb_template/Resources/Public/StyleSheets/mediaelements.css" identifier="mediaelementsCSS"/>
</html>
